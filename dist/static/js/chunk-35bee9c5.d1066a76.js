(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-35bee9c5"],{"5b92":function(t,e,n){},"6b31":function(t,e,n){},"84f2":function(t,e,n){"use strict";n("6b31")},"962d":function(t,e,n){"use strict";n("5b92")},a7f0:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container",staticStyle:{height:"calc(100vh - 150px)"}},[n("el-row",[n("el-col",{attrs:{xs:24,sm:24,lg:5}},[n("el-tabs",{attrs:{type:"border-card"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},t._l(t.material_type,(function(e,i){return n("el-tab-pane",{key:"material_type"+i,attrs:{name:e,label:e}},[n("el-table",{staticStyle:{width:"100%","border-collapse":"collapse"},attrs:{"show-header":!1,data:t.materials}},[n("el-table-column",{attrs:{"min-width":"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{class:e.$index===t.m_s_index?"selectTheme":"theme",domProps:{innerHTML:t._s(e.row.content)},on:{dblclick:function(n){return t.useModel(e.row)},click:function(n){return t.contentClick(e.$index)}}},[t._v(t._s(e.row.content))]),e.$index===t.m_s_index?n("el-button",{staticStyle:{"margin-top":"10px","margin-left":"50px"},attrs:{size:"mini",type:"primary",icon:"el-icon-check"},on:{click:function(n){return t.useModel(e.row)}}},[t._v("使用")]):t._e()]}}],null,!0)})],1)],1)})),1)],1),n("el-col",{attrs:{xs:24,sm:24,lg:2}},[n("div",{staticClass:"muluBg"},[n("p",[t._v("目录")]),t._l(t.mulu,(function(e,i){return n("div",{key:"mulu"+i,staticClass:"mulu",class:t.muluSelect===i?"muluS":"mulu",on:{click:function(e){return t.muluClick(i)}}},[t._v(" 第 "+t._s(e)+" 章 ")])}))],2)]),n("el-col",{attrs:{xs:24,sm:24,lg:12}},[n("el-button",[t._v("插入图片")]),n("el-button",[t._v("设置样式")]),n("el-button",{on:{click:function(e){return t.insertEdit()}}},[t._v("插入可编辑区域")]),n("el-button",[t._v("AI自动优化本章")]),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"dragTable",staticStyle:{width:"100%"},attrs:{data:t.list,border:"",fit:"","highlight-current-row":"","row-class-name":t.tableRowClassName},on:{"row-click":t.onRowClick}},[n("el-table-column",{attrs:{align:"center",label:"内容","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.edit?[n("el-input",{staticClass:"edit-input",attrs:{size:"small",type:"textarea",autosize:{minRows:2,maxRows:20}},on:{blur:function(n){return t.confirmEdit(e.row)},input:t.inuptChange},model:{value:e.row.title,callback:function(n){t.$set(e.row,"title",n)},expression:"scope.row.title"}}),n("el-button",{staticClass:"cancel-btn",attrs:{size:"small",icon:"el-icon-refresh",type:"warning"},on:{click:function(n){return t.cancelEdit(e.row)}}},[t._v(" cancel ")])]:n("span",{on:{dblclick:function(n){return t.beginEdit(e.row.title,e.row,e.$index)}}},[t._v(t._s(e.row.title))])]}}])}),n("el-table-column",{attrs:{align:"center",label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.edit?n("el-button",{attrs:{type:"success",size:"small",icon:"el-icon-circle-check-outline"},on:{click:function(n){return t.confirmEdit(e.row)}}},[t._v(" Ok ")]):n("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-edit"},on:{click:function(n){return t.beginEdit(e.row.title,e.row,e.$index)}}},[t._v(" Edit ")]),n("svg-icon",{staticClass:"drag-handler action-icon",attrs:{"icon-class":"drag"}})]}}])})],1)],1),n("el-col",{attrs:{xs:24,sm:24,lg:5}},[n("p",{staticStyle:{"text-align":"center"}},[t._v("提示")]),n("el-table",{staticStyle:{width:"100%","border-collapse":"collapse"},attrs:{"show-header":!1,data:t.prompt}},[n("el-table-column",{attrs:{"min-width":"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{class:e.$index===t.p_s_index?"selectTheme":"theme",domProps:{innerHTML:t._s(e.row)},on:{click:function(n){return t.promptClick(e.$index)}}},[t._v(t._s(e.row))]),!1===t.has_rep&&e.$index===t.p_s_index?n("el-button",{staticStyle:{"margin-top":"10px","margin-left":"50px"},attrs:{size:"mini",type:"primary",icon:"el-icon-check"},on:{click:function(n){return t.relpaceStr(e.$index)}}},[t._v("使用")]):t._e(),!0===t.has_rep&&e.$index===t.p_s_index?n("div",{staticStyle:{display:"inline-block"}},[n("el-button",{staticStyle:{"margin-top":"10px",display:"inline-block"},attrs:{size:"mini",type:"primary"},on:{click:function(n){return t.insertStr(0,e.$index)}}},[t._v("插入最前")]),n("el-button",{staticStyle:{"margin-top":"10px",display:"inline-block"},attrs:{size:"mini",type:"primary"},on:{click:function(n){return t.insertStr(1,e.$index)}}},[t._v("插入最后")])],1):t._e()]}}])})],1)],1)],1)],1)},r=[],o=(n("99af"),n("a15b"),n("fb6a"),n("a434"),n("e9c4"),n("b64b"),n("d3b7"),n("ac1f"),n("841c"),n("159b"),n("caf6")),s=n("aa47"),a=n("fa7d"),c={name:"EditTemp",components:{},props:{},data:function(){return{activeName:"素材库",material_type:["素材库"],materials:["素材库","开放互联网信息","素材库","开放互联网信息","素材库","开放互联网信息"],sortable:null,list:[],listLoading:!0,currentRowIndex:-1,id:"",mulu:[],muluSelect:0,prompt:void 0,prompt_type:void 0,m_s_index:-1,e_s_index:-1,has_rep:!1,p_s_index:-1}},computed:{},watch:{},created:function(){},mounted:function(){var t=Object(a["b"])();if(t){var e=JSON.parse(t);this.id=e.id,this.mulu=e.p_num,this.getList(),this.search()}else this.$router.push("/")},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){},methods:{muluClick:function(t){this.muluSelect=t,this.getList()},search:function(){var t=this,e=Object(a["a"])();e.length>1&&Object(o["d"])({label:e,start:1}).then((function(e){t.materials=e.data})).catch((function(t){console.log("error=="+JSON.stringify(t))}))},tableRowClassName:function(t){var e=t.row,n=t.rowIndex;e.row_index=n},onRowClick:function(t,e,n){this.currentRowIndex=t.row_index},insertEdit:function(){this.list.splice(this.currentRowIndex+1,0,{title:"",edit:!0})},useModel:function(t){this.list.splice(this.currentRowIndex+1,0,{title:t.content,edit:!1}),this.saveItem()},contentClick:function(t){this.m_s_index===t?this.m_s_index=-1:this.m_s_index=t},promptClick:function(t){this.p_s_index===t?this.p_s_index=-1:this.p_s_index=t},getList:function(){var t=this;this.listLoading=!0,Object(o["b"])({id:this.id,num:this.mulu[this.muluSelect]}).then((function(e){if(e.data){var n=e.data.split("\n"),i=[];n.forEach((function(t){Object(a["e"])(t)&&i.push({title:t,originalTitle:t,edit:!1})})),t.list=i,t.setSort()}t.listLoading=!1})).catch((function(e){t.listLoading=!1}))},setSort:function(){var t=this,e=this.$refs.dragTable.$el.querySelectorAll(".el-table__body-wrapper > table > tbody")[0];this.sortable=s["a"].create(e,{ghostClass:"sortable-ghost",setData:function(t){t.setData("Text","")},onEnd:function(e){var n=t.list.splice(e.oldIndex,1)[0];t.list.splice(e.newIndex,0,n),t.saveItem()}})},cancelEdit:function(t){t.title=t.originalTitle,t.edit=!1},saveItem:function(){var t="";this.list.forEach((function(e){t+=e.title+"\n"})),Object(o["c"])({id:this.id,num:this.mulu[this.muluSelect],text:t}).then((function(t){console.log("response=="+JSON.stringify(t))})).catch((function(t){console.log("error=="+JSON.stringify(t))}))},confirmEdit:function(t){t.edit=!1,0==Object(a["e"])(t.title).length&&this.list.splice(t.row_index,1),t.originalTitle!=t.title&&(t.originalTitle=t.title,this.saveItem())},inuptChange:function(t){var e=this;if(this.prompt=void 0,t.length>5){var n=t.split("。");if(n.length>1){var i=n.length;if(t=n[i-1],t.length<5)return}Object(o["f"])({text:t,type:"sentence"}).then((function(t){e.prompt_type="sentence",e.prompt=t.data})).catch((function(t){console.log("error=="+JSON.stringify(t))}))}},beginEdit:function(t,e,n){var i=this;if(e.edit=!e.edit,this.e_s_index=n,this.prompt=void 0,this.has_rep=!1,t.length>5){var r=300;if(t.length>r){var s=t.slice(0,r),a=s.split("。"),c=a.length;a=a.slice(0,c-1),t=a.join("。")+"。"}Object(o["f"])({text:t,type:"paragraph"}).then((function(t){i.prompt_type="paragraph",i.prompt=t.data})).catch((function(t){console.log("error=="+JSON.stringify(t))}))}},relpaceStr:function(t){if(this.list.length>this.e_s_index){var e=this.prompt[t],n=this.list[this.e_s_index];if("paragraph"===this.prompt_type)n.title=e,this.has_rep=!0;else if("sentence"===this.prompt_type){var i=n.title,r=i.split("。");if(r.length>1){var o=r.length;r[o-1]=e,n.title=r.join("。")}else n.title=this.prompt;this.has_rep=!0}this.has_rep&&(this.prompt.splice(t,1),this.p_s_index=-1)}},insertStr:function(t,e){if(this.list.length>this.e_s_index){var n=this.prompt[e]||"",i=this.list[this.e_s_index],r=i.title||"",o=r.split("。"),s=n.split("。");("paragraph"===this.prompt_type||"sentence"===this.prompt_type)&&(o=0===t?s.concat(o):o.concat(s)),i.title=o.join("。"),this.prompt.splice(e,1),this.p_s_index=-1}}}},l=c,u=(n("962d"),n("84f2"),n("2877")),d=Object(u["a"])(l,i,r,!1,null,"6e06b664",null);e["default"]=d.exports},caf6:function(t,e,n){"use strict";n.d(e,"i",(function(){return r})),n.d(e,"l",(function(){return o})),n.d(e,"k",(function(){return s})),n.d(e,"j",(function(){return a})),n.d(e,"h",(function(){return l})),n.d(e,"f",(function(){return u})),n.d(e,"g",(function(){return d})),n.d(e,"d",(function(){return p})),n.d(e,"b",(function(){return f})),n.d(e,"c",(function(){return h})),n.d(e,"a",(function(){return m}));var i=n("b775");function r(t){return Object(i["a"])({url:"/users/login",method:"post",data:t})}function o(t){return Object(i["a"])({url:"/users/verify_invitation",method:"post",data:t})}function s(t){return Object(i["a"])({url:"/users/send_reg_code",method:"post",data:t})}function a(t){return Object(i["a"])({url:"/users/register",method:"post",data:t})}function c(t,e){return Object(i["a"])({url:t,method:"post",transformRequest:[function(t){var e="";for(var n in t)e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n])+"&";return e=e.substring(0,e.lastIndexOf("&")),e}],data:e})}function l(t){return c("/hao-pian-zhang-api/title_label",t)}function u(t){return c("/hao-pian-zhang-api/sim",t)}function d(t){return c("/hao-pian-zhang-api/template",t)}function p(t){return c("/hao-pian-zhang-api/search",t)}function f(t){return c("/hao-pian-zhang-api/paragraphs",t)}function h(t){return c("/hao-pian-zhang-api/save_paragraphs",t)}function m(t){return c("/hao-pian-zhang-api/my_article",t)}},fa7d:function(t,e,n){"use strict";n.d(e,"e",(function(){return o})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return a})),n.d(e,"d",(function(){return c})),n.d(e,"b",(function(){return l}));n("ac1f"),n("5319");var i=n("a78e"),r=n.n(i);function o(t){return t.replace(/^\s*|\s*$/g,"")}function s(t){return r.a.set("key_word",t)}function a(){return r.a.get("key_word")}function c(t){return r.a.set("select_templated",t)}function l(){return r.a.get("select_templated")}}}]);